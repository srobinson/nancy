# Initiative: Composable Prompt Architecture with Beads

## Problem Statement

Nancy needs a first-class prompt factory that is:

- **Composable**: Mix and match fragments like Lego
- **Extensible**: Easy to add new contexts, languages, frameworks
- **Discoverable**: Developers can find what exists and how to use it
- **Scalable**: Works for 1 project or 100 projects
- **Clear Separation**: Know what goes in beads vs markdown templates

## Context

**Beads** (https://github.com/steveyegge/beads) is our memory/storage format:
- YAML-based structured data
- Human-readable and editable
- Stores user identity, project context, preferences, code style

**Markdown templates** are prompt fragments that get assembled.

## Core Challenge

Where do we draw the line between:
- **Data** (beads) vs **Instructions** (markdown)
- **User-specific** vs **Project-specific** vs **Universal**
- **Schema rigidity** vs **flexibility**

## Use Cases to Support

1. **Onboarding**: New user, progressive questions, save preferences
2. **Project Discovery**: Detect tech stack, ask relevant questions
3. **Task Initialization**: Assemble context-aware prompt for Claude
4. **Style Adaptation**: POC vs Production, TS vs Go, React vs Svelte
5. **Cross-project learning**: Patterns from one project inform others

## Key Questions

1. **Schema Design**: How do we structure beads for composability without rigidity?
2. **Composability**: What are modern patterns for assembling complex contexts?
3. **Extensibility**: How do we add new languages/frameworks/workflows without breaking existing?
4. **Discoverability**: How do users/systems find and utilize available fragments?
5. **Content Organization**: What belongs in beads (data) vs markdown (instructions)?

## Success Criteria

- Add a new language's coding style without touching core system
- Combine user preferences + project context + task type seamlessly
- Developers can browse and understand what's available
- System scales from 1 to 100+ projects without complexity explosion
- Clear mental model: "This type of info goes here, that type goes there"

## Research Focus

Investigate modern approaches in:
- Configuration management systems
- Plugin architectures
- Content management systems
- LLM prompt engineering frameworks
- Declarative composition patterns

Look for battle-tested patterns, not academic theory.

---

**Date**: 2026-01-24
**Status**: Research Phase
