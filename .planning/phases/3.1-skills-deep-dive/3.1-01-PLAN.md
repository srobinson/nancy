<!-- b_path:: .planning/phases/3.1-skills-deep-dive/3.1-01-PLAN.md -->
---
phase: 3.1-skills-deep-dive
plan: 01
type: execute
---

<objective>
Audit all Nancy skills and fix the two most problematic skills (check-tokens, session-history).

Purpose: Ensure all skills follow Claude Code best practices for reliable triggering and discovery.
Output: All skills audited, check-tokens and session-history fixed per RESEARCH.md recommendations.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/3.1-skills-deep-dive/3.1-RESEARCH.md
@.planning/issues/check-tokens-skill-regression.md

**Skills to audit:**
@skills/check-tokens/SKILL.md
@skills/session-history/SKILL.md
@skills/check-directives/SKILL.md
@skills/send-message/SKILL.md
@skills/create-spec/SKILL.md
@skills/orchestrator/SKILL.md
@skills/update-spec/SKILL.md

**Key findings from RESEARCH.md:**
- Descriptions MUST be single-line (multi-line breaks Claude Code parser)
- Use `# prettier-ignore` before description to prevent reformatting
- 15,000 char budget for ALL skill descriptions combined
- Third-person descriptions work better for triggering
- Trigger-rich language: include specific phrases that match user intent
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit all Nancy skills</name>
  <files>skills/*/SKILL.md</files>
  <action>
For each of the 7 skills (check-tokens, session-history, check-directives, send-message, create-spec, orchestrator, update-spec):

1. Check YAML frontmatter:
   - Is `name` field present and valid (lowercase, hyphens)?
   - Is `description` field SINGLE LINE? (critical - multi-line breaks parser)
   - Is `# prettier-ignore` present before description?

2. Measure description length (chars)

3. Evaluate description quality:
   - Third-person voice? ("Processes X" not "I help with X")
   - Trigger-rich? (includes specific phrases users might say)
   - Clear about when to use?

4. Create audit report in summary showing:
   - Skill name
   - Description length (chars)
   - Issues found
   - Recommendation

Calculate total character count across all descriptions. Should be well under 15,000.
  </action>
  <verify>Output audit report showing all 7 skills analyzed with character counts and issues</verify>
  <done>Complete audit report with total character budget usage and per-skill status</done>
</task>

<task type="auto">
  <name>Task 2: Fix check-tokens and session-history skills</name>
  <files>skills/check-tokens/SKILL.md, skills/session-history/SKILL.md</files>
  <action>
**Update check-tokens/SKILL.md:**

1. Add `# prettier-ignore` before description
2. Replace description with trigger-rich, third-person version:
   ```
   description: Monitor context window token usage. Use at turn start, after major tasks, when context feels full, or when user asks about tokens or context usage.
   ```
3. Update body to acknowledge limitation: Claude Code doesn't expose actual token counts, so skill should guide estimation based on conversation length and provide threshold guidance
4. Address issue from check-tokens-skill-regression.md: clarify that actual token measurement isn't available, skill provides guidance for managing context

**Update session-history/SKILL.md:**

1. Add `# prettier-ignore` before description
2. Replace description with cleaner third-person version:
   ```
   description: Access CLI session history for continuing work, summarizing conversations, or searching past sessions. Triggers on: continue from last session, what did we do, search sessions, summarize session.
   ```
3. Review body for any issues (currently looks OK based on audit)

**Important:** Keep all descriptions on SINGLE LINE - no newlines in YAML value.
  </action>
  <verify>
- grep -c "prettier-ignore" skills/check-tokens/SKILL.md shows 1
- grep -c "prettier-ignore" skills/session-history/SKILL.md shows 1
- head -4 skills/check-tokens/SKILL.md shows single-line description
- head -4 skills/session-history/SKILL.md shows single-line description
  </verify>
  <done>Both skills updated with single-line descriptions, prettier-ignore comments, and third-person trigger-rich language</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 7 skills audited with character counts
- [ ] check-tokens description is single-line with prettier-ignore
- [ ] session-history description is single-line with prettier-ignore
- [ ] Total description character count calculated and under 15,000
- [ ] check-tokens issue acknowledged in skill body (limitation documented)
</verification>

<success_criteria>

- Complete audit report for all 7 skills
- check-tokens and session-history fixed per RESEARCH.md recommendations
- No multi-line YAML descriptions
- Total character budget verified under limit
</success_criteria>

<output>
After completion, create `.planning/phases/3.1-skills-deep-dive/3.1-01-SUMMARY.md`:

# Phase 3.1 Plan 01: Audit and Core Fixes Summary

**[One-liner summarizing what shipped]**

## Accomplishments

- [Audit results]
- [Skills fixed]

## Files Created/Modified

- `skills/check-tokens/SKILL.md` - Description
- `skills/session-history/SKILL.md` - Description

## Decisions Made

[Key decisions and rationale]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 3.1-02-PLAN.md (remaining skill updates and verification)
</output>
